<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User Panel</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background: #f9f9f9; }
    h1 { color: #444; }
    .circle {
      width: 150px; height: 150px;
      border-radius: 50%;
      background: gold; color: #222;
      display: flex; align-items: center; justify-content: center;
      font-size: 18px; font-weight: bold; margin: 20px auto;
      cursor: pointer; box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    .section { margin: 20px; padding: 15px; background: #fff; border-radius: 10px; box-shadow: 0 0 5px rgba(0,0,0,0.2);}
    label { display: block; margin: 5px 0; }
    input, select, button { padding: 8px; margin: 5px; width: 80%; }
    button { background: #222; color: #fff; border: none; cursor: pointer; }
    #timer { font-weight: bold; margin-top: 10px; }
  </style>
</head>
<body>

  <h1>User Panel</h1>
  <h2>Balance: <span id="balance">0</span> PKR</h2>

  <!-- Buy Plan -->
  <div class="circle" onclick="buyPlan()">Buy Plan</div>
  <div id="timer">No active plan</div>

  <!-- Deposit -->
  <div class="section">
    <h3>Deposit</h3>
    <p>Send to Easypaisa: <b>03319535871</b></p>
    <p>Send to JazzCash: <b>03159676813</b></p>
    <form onsubmit="makeDeposit(event)">
      <label>Method</label>
      <select id="depositMethod">
        <option value="Easypaisa">Easypaisa</option>
        <option value="JazzCash">JazzCash</option>
      </select>
      <label>Your Number</label>
      <input type="text" id="depositNumber" required>
      <label>Amount</label>
      <input type="number" id="depositAmount" required>
      <button type="submit">Submit Deposit</button>
    </form>
  </div>

  <!-- Withdraw -->
  <div class="section">
    <h3>Withdraw</h3>
    <form onsubmit="makeWithdraw(event)">
      <label>Method</label>
      <select id="withdrawMethod">
        <option value="Easypaisa">Easypaisa</option>
        <option value="JazzCash">JazzCash</option>
      </select>
      <label>Your Number</label>
      <input type="text" id="withdrawNumber" required>
      <label>Amount</label>
      <input type="number" id="withdrawAmount" required>
      <button type="submit">Request Withdraw</button>
    </form>
  </div>

<script>
  let balance = parseInt(localStorage.getItem("balance")) || 0;
  document.getElementById("balance").innerText = balance;

  let planEnd = parseInt(localStorage.getItem("planEnd")) || null;
  if (planEnd) startTimer(planEnd);

  function buyPlan() {
    let now = Date.now();
    let end = now + 24 * 60 * 60 * 1000; // 24h
    localStorage.setItem("planEnd", end);
    startTimer(end);
    alert("Plan started! After 24h you will get 833 PKR profit.");
  }

  function startTimer(end) {
    function update() {
      let now = Date.now();
      let diff = end - now;
      if (diff <= 0) {
        balance += 833;
        localStorage.setItem("balance", balance);
        document.getElementById("balance").innerText = balance;
        localStorage.removeItem("planEnd");
        document.getElementById("timer").innerText = "Plan finished! Profit added.";
        clearInterval(interval);
        return;
      }
      let hours = Math.floor(diff / (1000 * 60 * 60));
      let mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      let secs = Math.floor((diff % (1000 * 60)) / 1000);
      document.getElementById("timer").innerText = hours + "h " + mins + "m " + secs + "s remaining";
    }
    update();
    var interval = setInterval(update, 1000);
  }

  function makeDeposit(e) {
    e.preventDefault();
    let method = document.getElementById("depositMethod").value;
    let number = document.getElementById("depositNumber").value;
    let amount = document.getElementById("depositAmount").value;

    let deposits = JSON.parse(localStorage.getItem("deposits")) || [];
    deposits.push({method, number, amount, status:"Pending"});
    localStorage.setItem("deposits", JSON.stringify(deposits));
    alert("Deposit request sent to Admin!");
    e.target.reset();
  }

  function makeWithdraw(e) {
    e.preventDefault();
    let method = document.getElementById("withdrawMethod").value;
    let number = document.getElementById("withdrawNumber").value;
    let amount = document.getElementById("withdrawAmount").value;

    let withdraws = JSON.parse(localStorage.getItem("withdraws")) || [];
    withdraws.push({method, number, amount, status:"Pending"});
    localStorage.setItem("withdraws", JSON.stringify(withdraws));
    alert("Withdraw request sent to Admin!");
    e.target.reset();
  }
</script>
</body>
</html>
