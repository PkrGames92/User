<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User Panel</title>
  <style>
    body { font-family: Arial, sans-serif; background:#fffbe6; text-align:center; }
    .card { background:#ffd700; border-radius:20px; padding:20px; margin:20px; box-shadow:0 0 10px #aaa; }
    button { padding:10px 20px; margin:10px; border:none; border-radius:20px; cursor:pointer; }
    .gold-btn { background:#ffcc00; }
    .red-btn { background:#ff4444; color:#fff; }
    .green-btn { background:#44c767; color:#fff; }
  </style>
</head>
<body>

  <h1>User Panel</h1>
  <div class="card">
    <h2>Balance: <span id="balance">0</span> PKR</h2>
    <h3 id="profitInfo"></h3>
  </div>

  <div class="card">
    <h2>Buy Plan</h2>
    <button class="gold-btn" onclick="buyPlan()">Buy (5000 PKR)</button>
    <p id="timer"></p>
  </div>

  <div class="card">
    <h2>Deposit</h2>
    <input id="depAmount" type="number" placeholder="Enter amount">
    <button class="green-btn" onclick="deposit()">Submit Deposit</button>
    <p>(Deposit goes to Admin for approval)</p>
  </div>

  <div class="card">
    <h2>Withdraw</h2>
    <input id="withAmount" type="number" placeholder="Enter amount">
    <button class="red-btn" onclick="withdraw()">Submit Withdraw</button>
    <p>(Withdraw goes to Admin for approval)</p>
  </div>

<script>
let balance = parseInt(localStorage.getItem("balance")||0);
document.getElementById("balance").innerText = balance;

// Buy plan
function buyPlan(){
  if(balance >= 5000){
    balance -= 5000;
    localStorage.setItem("balance", balance);
    document.getElementById("balance").innerText = balance;
    let end = Date.now() + 24*60*60*1000;
    localStorage.setItem("planEnd", end);
    runTimer();
  } else {
    alert("Not enough balance!");
  }
}

// Timer
function runTimer(){
  let end = localStorage.getItem("planEnd");
  if(!end) return;
  let timerEl = document.getElementById("timer");
  let x = setInterval(()=>{
    let now = Date.now();
    let dist = end - now;
    if(dist <= 0){
      clearInterval(x);
      balance += 833;
      localStorage.setItem("balance", balance);
      document.getElementById("balance").innerText = balance;
      localStorage.removeItem("planEnd");
      timerEl.innerText = "Profit added: 833 PKR!";
    } else {
      let h = Math.floor(dist/(1000*60*60));
      let m = Math.floor((dist%(1000*60*60))/(1000*60));
      let s = Math.floor((dist%(1000*60))/1000);
      timerEl.innerText = `Profit in ${h}h ${m}m ${s}s`;
    }
  },1000);
}
runTimer();

// Deposit request
function deposit(){
  let amt = document.getElementById("depAmount").value;
  if(amt>0){
    let reqs = JSON.parse(localStorage.getItem("deposits")||"[]");
    reqs.push({amount:amt,status:"pending"});
    localStorage.setItem("deposits", JSON.stringify(reqs));
    alert("Deposit request sent to Admin!");
  }
}

// Withdraw request
function withdraw(){
  let amt = document.getElementById("withAmount").value;
  if(amt>0){
    let reqs = JSON.parse(localStorage.getItem("withdraws")||"[]");
    reqs.push({amount:amt,status:"pending"});
    localStorage.setItem("withdraws", JSON.stringify(reqs));
    alert("Withdraw request sent to Admin!");
  }
}
</script>

</body>
</html>
